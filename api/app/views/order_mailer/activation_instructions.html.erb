<!-- app/views/order_mailer/activation_instructions.html.erb -->
<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background-color: #ffffff;">
  <!-- Header -->
  <div style="background-color: #1f2937; color: white; padding: 24px; text-align: center;">
    <h1 style="margin: 0; font-size: 24px;">XSpaceGrow</h1>
    <p style="margin: 8px 0 0 0; opacity: 0.8;">Device Activation Instructions</p>
  </div>

  <!-- Main Content -->
  <div style="padding: 32px 24px;">
    <!-- Welcome Message -->
    <div style="text-align: center; margin-bottom: 32px;">
      <h2 style="color: #1f2937; margin: 0 0 16px 0;">Activate Your <%= @device_name %>!</h2>
      <p style="color: #6b7280; margin: 0; font-size: 16px;">
        Hi <%= @user.display_name || @user.email.split('@').first.capitalize %>, your device is ready to be activated and connected to your XSpaceGrow dashboard.
      </p>
    </div>

    <!-- Activation Token Box -->
    <div style="background-color: #dbeafe; border: 2px solid #3b82f6; border-radius: 12px; padding: 24px; margin-bottom: 32px; text-align: center;">
      <h3 style="margin: 0 0 16px 0; color: #1e40af;">Your Activation Token</h3>
      <div style="background-color: #ffffff; border: 2px dashed #3b82f6; border-radius: 8px; padding: 16px; margin: 16px 0;">
        <div style="font-family: 'Courier New', monospace; font-size: 20px; font-weight: bold; color: #1e40af; letter-spacing: 2px;">
          <%= @token %>
        </div>
      </div>
      <p style="margin: 16px 0 0 0; color: #1e40af; font-size: 14px;">
        <strong>Expires:</strong> <%= @expires_at.strftime("%B %d, %Y at %I:%M %p") %>
      </p>
    </div>

    <!-- Step-by-Step Instructions -->
    <div style="margin-bottom: 32px;">
      <h3 style="color: #1f2937; margin: 0 0 24px 0;">Activation Steps</h3>
      
      <!-- Step 1 -->
      <div style="display: flex; margin-bottom: 24px;">
        <div style="background-color: #3b82f6; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 16px; flex-shrink: 0;">1</div>
        <div>
          <h4 style="margin: 0 0 8px 0; color: #1f2937;">Power On Your Device</h4>
          <p style="margin: 0; color: #6b7280; font-size: 14px;">Connect your <%= @device_name %> to power and ensure it's within range of your WiFi network.</p>
        </div>
      </div>

      <!-- Step 2 -->
      <div style="display: flex; margin-bottom: 24px;">
        <div style="background-color: #3b82f6; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 16px; flex-shrink: 0;">2</div>
        <div>
          <h4 style="margin: 0 0 8px 0; color: #1f2937;">Enter Activation Token</h4>
          <p style="margin: 0; color: #6b7280; font-size: 14px;">Use the device interface or web portal to enter your activation token: <strong><%= @token %></strong></p>
        </div>
      </div>

      <!-- Step 3 -->
      <div style="display: flex; margin-bottom: 24px;">
        <div style="background-color: #3b82f6; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 16px; flex-shrink: 0;">3</div>
        <div>
          <h4 style="margin: 0 0 8px 0; color: #1f2937;">Configure WiFi</h4>
          <p style="margin: 0; color: #6b7280; font-size: 14px;">Follow the on-device prompts to connect to your WiFi network and complete the setup.</p>
        </div>
      </div>

      <!-- Step 4 -->
      <div style="display: flex;">
        <div style="background-color: #3b82f6; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 16px; flex-shrink: 0;">4</div>
        <div>
          <h4 style="margin: 0 0 8px 0; color: #1f2937;">Monitor Your Device</h4>
          <p style="margin: 0; color: #6b7280; font-size: 14px;">Once activated, your device will appear in your XSpaceGrow dashboard for monitoring and control.</p>
        </div>
      </div>
    </div>

    <!-- Device-Specific Information -->
    <div style="background-color: #f0fdf4; border: 1px solid #22c55e; border-radius: 8px; padding: 20px; margin-bottom: 32px;">
      <h4 style="margin: 0 0 12px 0; color: #166534;">üìä Your <%= @device_name %> Features</h4>
      <% if @device_type.name == 'Environmental Monitor V1' %>
        <ul style="margin: 0; color: #166534; padding-left: 20px;">
          <li>Temperature monitoring (¬∞C)</li>
          <li>Humidity monitoring (%)</li>
          <li>Pressure monitoring (Bar)</li>
          <li>Light control automation</li>
          <li>Spray cycle management</li>
        </ul>
      <% elsif @device_type.name == 'Liquid Monitor V1' %>
        <ul style="margin: 0; color: #166534; padding-left: 20px;">
          <li>pH monitoring (pH)</li>
          <li>EC monitoring (mS/cm)</li>
          <li>Temperature monitoring (¬∞C)</li>
          <li>5-pump nutrient dosing system</li>
          <li>Automated dosing schedules</li>
        </ul>
      <% else %>
        <p style="margin: 0; color: #166534;">Check your device documentation for specific features and capabilities.</p>
      <% end %>
    </div>

    <!-- Important Notice -->
    <div style="background-color: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 16px; margin-bottom: 32px;">
      <div style="display: flex; align-items: center;">
        <div style="font-size: 20px; margin-right: 12px;">‚ö†Ô∏è</div>
        <div>
          <h4 style="margin: 0 0 4px 0; color: #92400e;">Important</h4>
          <p style="margin: 0; color: #92400e; font-size: 14px;">
            Your activation token expires on <strong><%= @expires_at.strftime("%B %d, %Y") %></strong>. 
            Please activate your device before this date.
          </p>
        </div>
      </div>
    </div>

    <!-- Quick Access Button -->
    <div style="text-align: center; margin-bottom: 32px;">
      <a href="<%= Rails.application.config.app_host || 'http://localhost:3000' %>/dashboard" 
         style="background-color: #3b82f6; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 600; display: inline-block;">
        Access Your Dashboard
      </a>
    </div>

    <!-- Support -->
    <div style="text-align: center; padding-top: 24px; border-top: 1px solid #e5e7eb;">
      <p style="color: #6b7280; margin: 0 0 8px 0;">Need help with activation?</p>
      <p style="margin: 0;">
        <a href="mailto:support@spacegrow.local" style="color: #2563eb; text-decoration: none;">support@spacegrow.local</a>
        <span style="color: #6b7280;"> | </span>
        <a href="<%= Rails.application.config.app_host || 'http://localhost:3000' %>/support" style="color: #2563eb; text-decoration: none;">Setup Guide</a>
      </p>
    </div>
  </div>

  <!-- Footer -->
  <div style="background-color: #f9fafb; padding: 24px; text-align: center; border-top: 1px solid #e5e7eb;">
    <p style="margin: 0; color: #6b7280; font-size: 14px;">
      ¬© <%= Date.current.year %> XSpaceGrow. All rights reserved.
    </p>
  </div>
</div>